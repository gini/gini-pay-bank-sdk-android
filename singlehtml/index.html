

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Gini Capture SDK for Android 2.0 documentation</title>
  

  
  

  
  <link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600,400italic,600italic|Source+Code+Pro|Roboto+Slab:400,700" rel="stylesheet" type="text/css" />

  
  

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:'./',
        VERSION:'2.0',
        COLLAPSE_INDEX:false,
        FILE_SUFFIX:'.html',
        HAS_SOURCE:  true
      };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/language_data.js"></script>

    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
    <script type="text/javascript">
        jQuery(function () {
            SphinxRtdTheme.StickyNav.enable();
        });
    </script>
  

  
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="None" href="index.html#document-index"/> 

  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html#document-index" id="gini-logo">gini API</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-getting-started">Getting started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#installation">Installation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-integration">Integration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#capturing-invoices">Capturing Invoices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#android-manifest">Android Manifest</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#requirements-check">Requirements Check</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#configuration">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#tablet-support">Tablet Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#networking">Networking</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#capture-flow">Capture Flow</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#handling-payment-requests">Handling Payment Requests</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#id5">Networking</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#id7">Android Manifest</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#package-name">Package Name</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#receive-payment-requests">Receive Payment Requests</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#testing">Testing</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-capture-features">Invoice Capture Features</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#features-from-the-gini-capture-sdk">Features from the Gini Capture SDK</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#file-import-open-with">File Import (Open With)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#return-assistant">Return Assistant</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#id1">Screen API</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#id3">Component API</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#sending-feedback">Sending Feedback</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-customization">Customization</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-migrating-from-gvl">Migrating from the Gini Vision Library</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#kotlin">Kotlin</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#gini-capture-sdk">Gini Capture SDK</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#gini-pay-api-library">Gini Pay API Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#configuration">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#screen-api">Screen API</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#component-api">Component API</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#open-with">Open With</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#id3">Screen API</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#id4">Component API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#networking">Networking</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#default">Default</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#custom">Custom</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#event-tracking">Event Tracking</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#customization">Customization</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-reference">Reference Doc</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-license">License</a></li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html#document-index">Gini Capture SDK for Android</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html#document-index">Docs</a> &raquo;</li>
      
    <li>Gini Capture SDK for Android 2.0 documentation</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="gini-pay-bank-sdk-for-android">
<h1>Gini Pay Bank SDK for Android<a class="headerlink" href="#gini-pay-bank-sdk-for-android" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>The Gini Pay Bank SDK for Android provides all the UI and functionality needed to use the Gini Pay API in your app to
extract payment information from invoices and to resolve payment requests originating from other apps.</p>
<p>The Gini Pay API provides an information extraction service for analyzing invoices. Specifically it extracts information
such as the document sender or the payment relevant information (amount to pay, IBAN, etc.). In addition it also
provides a secure channel for sharing payment related information between clients.</p>
</div>
<div class="section" id="table-of-contents">
<h2>Table of contents<a class="headerlink" href="#table-of-contents" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<span id="document-getting-started"></span><div class="section" id="getting-started">
<h3>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h3>
<div class="section" id="requirements">
<h4>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Android 5.0+ (API Level 21+)</li>
<li>Gini Capture SDK’s <a class="reference external" href="https://developer.gini.net/gini-capture-sdk-android/html/getting-started.html#requirements">requirements</a>.</li>
</ul>
<p>The Gini Pay Bank SDK uses our <a class="reference external" href="https://github.com/gini/gini-capture-sdk-android">Gini Capture SDK</a> to capture
invoices with the camera or by importing them from the device or other apps.</p>
</div>
<div class="section" id="installation">
<h4>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h4>
<p>The Gini Pay Bank SDK is available in our maven repository which you need to add to your <code class="docutils literal notranslate"><span class="pre">build.gradle</span></code> first:</p>
<div class="code groovy highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">repositories</span> <span class="p">{</span>
    <span class="n">maven</span> <span class="p">{</span>
        <span class="n">url</span> <span class="s1">&#39;https://repo.gini.net/nexus/content/repositories/open&#39;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Now you can add the Gini Pay Bank SDK to your app’s dependencies:</p>
<div class="code groovy highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dependencies</span> <span class="p">{</span>
    <span class="n">implementation</span> <span class="s1">&#39;net.gini:gini-pay-bank-sdk:1.3.1&#39;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>After syncing Gradle you can start integrating the SDK.</p>
</div>
</div>
<span id="document-integration"></span><div class="section" id="integration">
<h3>Integration<a class="headerlink" href="#integration" title="Permalink to this headline">¶</a></h3>
<p>The Gini Pay Bank SDK has two main features: <a class="reference internal" href="#capturing-invoices">capturing invoices</a> for information extraction and <a class="reference internal" href="#handling-payment-requests">handling payment requests</a>. Both
can be used independently and you may opt to use only one or both in your app.</p>
<div class="section" id="capturing-invoices">
<h4>Capturing Invoices<a class="headerlink" href="#capturing-invoices" title="Permalink to this headline">¶</a></h4>
<p>The capture feature uses our <a class="reference external" href="https://github.com/gini/gini-capture-sdk-android/">Gini Capture SDK</a> to provide
Activities and Fragments to capture invoices and prepare them for upload to the Gini Pay API. It also allows documents
to be imported from other apps. The captured images can be reviewed and are optimized on the device to provide the best
results when used with the Gini Pay API.</p>
<div class="section" id="android-manifest">
<h5>Android Manifest<a class="headerlink" href="#android-manifest" title="Permalink to this headline">¶</a></h5>
<p>The capture feature of the SDK uses the camera therefore the camera permission is required:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;manifest</span> <span class="na">xmlns:android=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span>
    <span class="na">package=</span><span class="s">&quot;...&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">&quot;android.permission.CAMERA&quot;</span> <span class="nt">/&gt;</span>

<span class="nt">&lt;/manifest&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Make sure you request the camera permission before starting the SDK.</p>
</div>
</div>
<div class="section" id="requirements-check">
<h5>Requirements Check<a class="headerlink" href="#requirements-check" title="Permalink to this headline">¶</a></h5>
<p>We recommend running our runtime requirements check first before launching the Gini Capture SDK to ensure the device is
capable of taking pictures of adequate quality.</p>
<p>Simply run <code class="docutils literal notranslate"><span class="pre">GiniPayBank.checkCaptureRequirements()</span></code> and inspect the returned <code class="docutils literal notranslate"><span class="pre">RequirementsReport</span></code> for the result:</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">On Android 6.0 and later the camera permission is required before checking the requirements.</p>
</div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">final</span> <span class="n">RequirementsReport</span> <span class="n">report</span> <span class="o">=</span> <span class="n">GiniPayBank</span><span class="p">.</span><span class="na">checkCaptureRequirements</span><span class="p">((</span><span class="n">Context</span><span class="p">)</span> <span class="k">this</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">report</span><span class="p">.</span><span class="na">isFulfilled</span><span class="p">())</span> <span class="p">{</span>
    <span class="kd">final</span> <span class="n">StringBuilder</span> <span class="n">stringBuilder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuilder</span><span class="p">();</span>
    <span class="n">report</span><span class="p">.</span><span class="na">getRequirementReports</span><span class="p">().</span><span class="na">forEach</span><span class="p">(</span><span class="n">requirementReport</span> <span class="o">-&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">requirementReport</span><span class="p">.</span><span class="na">isFulfilled</span><span class="p">())</span> <span class="p">{</span>
            <span class="n">stringBuilder</span><span class="p">.</span><span class="na">append</span><span class="p">(</span><span class="n">requirementReport</span><span class="p">.</span><span class="na">getRequirementId</span><span class="p">());</span>
            <span class="n">stringBuilder</span><span class="p">.</span><span class="na">append</span><span class="p">(</span><span class="s">&quot;: &quot;</span><span class="p">);</span>
            <span class="n">stringBuilder</span><span class="p">.</span><span class="na">append</span><span class="p">(</span><span class="n">requirementReport</span><span class="p">.</span><span class="na">getDetails</span><span class="p">());</span>
            <span class="n">stringBuilder</span><span class="p">.</span><span class="na">append</span><span class="p">(</span><span class="s">&quot;\n&quot;</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">});</span>
    <span class="n">Toast</span><span class="p">.</span><span class="na">makeText</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s">&quot;Requirements not fulfilled:\n&quot;</span> <span class="o">+</span> <span class="n">stringBuilder</span><span class="p">,</span>
            <span class="n">Toast</span><span class="p">.</span><span class="na">LENGTH_LONG</span><span class="p">).</span><span class="na">show</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="configuration">
<h5>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h5>
<p>Configuration and interaction is done using <code class="docutils literal notranslate"><span class="pre">CaptureConfiguration</span></code>. To set the configuration use the
<code class="docutils literal notranslate"><span class="pre">GiniPayBank.setCaptureConfiguration()</span></code> static method.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">The configuration is immutable and make sure to call <code class="docutils literal notranslate"><span class="pre">GiniPayBank.releaseCapture()</span></code> before setting a new
configuration.</p>
</div>
<p>You should call <code class="docutils literal notranslate"><span class="pre">GiniPayBank.releaseCapture()</span></code> after the SDK returned control to your application and your app has
sent feedback to the Gini Pay API and is not using the capture feature anymore.</p>
<p>To view all the configuration options see the documentation of <a class="reference external" href="http://developer.gini.net/gini-pay-bank-sdk-android/kdoc/ginipaybank/net.gini.pay.bank.capture/-capture-configuration/index.html">CaptureConfiguration</a>.</p>
<p>Information about the configurable features are available on the <a class="reference external" href="capture-features.html">Capture Features</a> page.</p>
</div>
<div class="section" id="tablet-support">
<h5>Tablet Support<a class="headerlink" href="#tablet-support" title="Permalink to this headline">¶</a></h5>
<p>The Gini Pay Bank SDK can be used on tablets, too. Some UI elements adapt to the larger screen to offer the best user
experience for tablet users.</p>
<p>Many tablets with at least 8MP cameras don’t have an LED flash. Therefore we don’t require flash for tablets. For this
reason the extraction quality on those tablets might be lower compared to smartphones.</p>
<p>On tablets landscape orientation is also supported (smartphones are portrait only). We advise you to test your
integration on tablets in both orientations.</p>
<p>In landscape the camera screen’s UI displays the camera trigger button on the right side of the screen. Users
can reach the camera trigger more easily this way. The camera preview along with the document corner guides are shown in
landscape to match the device’s orientation.</p>
<p>Other UI elements on all the screens maintain their relative position and the screen layouts are scaled automatically to
fit the current orientation.</p>
</div>
<div class="section" id="networking">
<h5>Networking<a class="headerlink" href="#networking" title="Permalink to this headline">¶</a></h5>
<p>The Gini Pay Bank SDK allows you to use the default networking implementation of our Gini Capture SDK to communicate with the Gini
Pay API. You may also implement your own networking layer.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You should have received Gini Pay API client credentials from us. Please get in touch with us in case you don’t have
them. Without credentials you won’t be able to use the Gini Pay API.</p>
</div>
<div class="section" id="default-implementation">
<h6>Default Implementation<a class="headerlink" href="#default-implementation" title="Permalink to this headline">¶</a></h6>
<p>The capture feature is not aware of any networking implementations and requires you to set them in the
<code class="docutils literal notranslate"><span class="pre">CaptureConfiguration</span></code>.</p>
<p>The default networking implementations are the <code class="docutils literal notranslate"><span class="pre">GiniCaptureDefaultNetworkService</span></code> and
<code class="docutils literal notranslate"><span class="pre">GiniCaptureDefaultNetworkApi</span></code>. We provide you with two helper methods to create them with the minimal configuration:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">val</span> <span class="n">networkService</span> <span class="o">=</span> <span class="n">getDefaultNetworkService</span><span class="p">(</span>
    <span class="n">context</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
    <span class="n">clientId</span> <span class="o">=</span> <span class="n">myClientId</span><span class="p">,</span>
    <span class="n">clientSecret</span> <span class="o">=</span> <span class="n">myClientSecret</span><span class="p">,</span>
    <span class="n">emailDomain</span> <span class="o">=</span> <span class="n">myEmailDomain</span><span class="p">,</span>
    <span class="n">documentMetadata</span> <span class="o">=</span> <span class="n">myDocumentMetadata</span>
<span class="p">)</span>

<span class="n">val</span> <span class="n">networkApi</span> <span class="o">=</span> <span class="n">getDefaultNetworkApi</span><span class="p">(</span><span class="n">networkService</span><span class="p">)</span>

<span class="n">GiniPayBank</span><span class="p">.</span><span class="na">setCaptureConfiguration</span><span class="p">(</span>
    <span class="n">CaptureConfiguration</span><span class="p">(</span>
        <span class="n">networkService</span> <span class="o">=</span> <span class="n">networkService</span><span class="p">,</span>
        <span class="n">networkApi</span> <span class="o">=</span> <span class="n">networkApi</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<p>For all configuration options of the default networking implementation see the documentation of
<a class="reference external" href="http://developer.gini.net/gini-capture-sdk-android/network/javadoc/net/gini/android/capture/network/GiniCaptureDefaultNetworkService.Builder.html">GiniCaptureDefaultNetworkService.Builder</a>
and <a class="reference external" href="http://developer.gini.net/gini-capture-sdk-android/network/javadoc/net/gini/android/capture/network/GiniCaptureDefaultNetworkApi.Builder.html">GiniCaptureDefaultNetworkApi.Builder</a>.</p>
</div>
<div class="section" id="custom-implementation">
<h6>Custom Implementation<a class="headerlink" href="#custom-implementation" title="Permalink to this headline">¶</a></h6>
<p>You can also provide your own networking by implementing the <code class="docutils literal notranslate"><span class="pre">GiniCaptureNetworkService</span></code> and the
<code class="docutils literal notranslate"><span class="pre">GiniCaptureNetworkApi</span></code> interfaces:</p>
<ul class="simple">
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">GiniCaptureNetworkService</span></code></dt>
<dd>This interface is used to upload, analyze and delete documents. See the <a class="reference external" href="http://developer.gini.net/gini-capture-sdk-android/ginicapture/dokka/ginicapture/net.gini.android.capture.network/-gini-capture-network-service/index.html">reference documentation</a>
for details.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">GiniCaptureNetworkApi</span></code></dt>
<dd>This interface is used to declare network tasks which should be called by you outside of the Gini Capture SDK (e.g.,
for sending feedback after the user saw and potentielly corrected the extractions).  See the <a class="reference external" href="http://developer.gini.net/gini-capture-sdk-android/ginicapture/dokka/ginicapture/net.gini.android.capture.network/-gini-capture-network-api/index.html">reference documentation</a>
for details.</dd>
</dl>
</li>
</ul>
<p>You may also use the <a class="reference external" href="https://github.com/gini/gini-pay-api-lib-android">Gini Pay API Library</a> for Android or implement
communication with the Gini API yourself.</p>
</div>
<div class="section" id="sending-feedback">
<h6>Sending Feedback<a class="headerlink" href="#sending-feedback" title="Permalink to this headline">¶</a></h6>
<p>Your app should send feedback for the extractions the Gini Pay API delivered. Feedback should be sent <em>only</em> for the
extractions the user has seen and accepted (or corrected).</p>
<p>For addition information about feedback see the <a class="reference external" href="https://pay-api.gini.net/documentation/#send-feedback-and-get-even-better-extractions-next-time">Gini Pay API documentation</a>.</p>
<div class="section" id="id2">
<h7>Default Implementation<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h7>
<p>The example below shows how to correct extractions and send feedback using the default networking implementation:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">val</span> <span class="n">networkApi</span><span class="p">:</span> <span class="n">GiniCaptureDefaultNetworkApi</span> <span class="c1">// Provided</span>

<span class="n">val</span> <span class="n">extractions</span><span class="p">:</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">GiniCaptureSpecificExtraction</span><span class="o">&gt;</span> <span class="c1">// Provided</span>

<span class="c1">// Modify the amount to pay extraction&#39;s value.</span>
<span class="n">GiniCaptureSpecificExtraction</span> <span class="n">amountToPay</span> <span class="o">=</span> <span class="n">extractions</span><span class="o">[</span><span class="s">&quot;amountToPay&quot;</span><span class="o">]</span><span class="p">;</span>
<span class="n">amountToPay</span><span class="p">.</span><span class="na">value</span> <span class="o">=</span> <span class="s">&quot;31.00:EUR&quot;</span>

<span class="c1">// You should send feedback only for extractions the user has seen and accepted.</span>
<span class="c1">// In this example only the amountToPay was wrong and we can reuse the other extractions.</span>
 <span class="n">val</span> <span class="n">feedback</span> <span class="o">=</span> <span class="n">mapOf</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">GiniCaptureSpecificExtraction</span><span class="o">&gt;</span><span class="p">(</span>
     <span class="s">&quot;iban&quot;</span> <span class="n">to</span> <span class="n">mExtractions</span><span class="o">[</span><span class="s">&quot;iban&quot;</span><span class="o">]</span><span class="p">,</span>
     <span class="s">&quot;amountToPay&quot;</span> <span class="n">to</span> <span class="n">amountTopay</span><span class="p">,</span>
     <span class="s">&quot;bic&quot;</span> <span class="n">to</span> <span class="n">mExtractions</span><span class="o">[</span><span class="s">&quot;bic&quot;</span><span class="o">]</span><span class="p">,</span>
     <span class="s">&quot;senderName&quot;</span> <span class="n">to</span> <span class="n">mExtractions</span><span class="o">[</span><span class="s">&quot;sencerName&quot;</span><span class="o">]</span>
 <span class="p">)</span>

 <span class="n">networkApi</span><span class="p">.</span><span class="na">sendFeedback</span><span class="p">(</span><span class="n">feedback</span><span class="p">,</span> <span class="n">object</span> <span class="p">:</span> <span class="n">GiniCaptureNetworkCallback</span><span class="o">&lt;</span><span class="n">Void</span><span class="p">,</span> <span class="n">Error</span><span class="o">&gt;</span> <span class="p">{</span>
     <span class="n">override</span> <span class="n">fun</span> <span class="nf">failure</span><span class="p">(</span><span class="n">error</span><span class="p">:</span> <span class="n">Error</span><span class="p">)</span> <span class="p">{</span>
         <span class="c1">// Handle the error.</span>
     <span class="p">}</span>

     <span class="n">override</span> <span class="n">fun</span> <span class="nf">success</span><span class="p">(</span><span class="n">result</span><span class="p">:</span> <span class="n">Void</span><span class="o">?</span><span class="p">)</span> <span class="p">{</span>
         <span class="c1">// Feedback sent successfully.</span>
     <span class="p">}</span>

     <span class="n">override</span> <span class="n">fun</span> <span class="nf">cancelled</span><span class="p">()</span> <span class="p">{</span>
         <span class="c1">// Handle cancellation.</span>
     <span class="p">}</span>
 <span class="p">})</span>
</pre></div>
</div>
</div>
<div class="section" id="id3">
<h7>Custom Implementation<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h7>
<p>If you use your own networking implementation and directly communicate with the Gini Pay API then see <a class="reference external" href="https://pay-api.gini.net/documentation/#submitting-feedback-on-extractions">this section</a> in its documentation on how to send
feedback.</p>
<p>In case you use the Gini Pay API Library then see <a class="reference external" href="https://developer.gini.net/gini-pay-api-lib-android/guides/common-tasks.html#sending-feedback">this section</a> in its documentation
for details.</p>
</div>
</div>
</div>
<div class="section" id="capture-flow">
<h5>Capture Flow<a class="headerlink" href="#capture-flow" title="Permalink to this headline">¶</a></h5>
<p>The capture flow can be used in two ways, either by using the <a class="reference internal" href="#screen-api">Screen API</a> or the <a class="reference internal" href="#component-api">Component API</a>:</p>
<ul class="simple">
<li>The <em>Screen API</em> provides activities for easy integration that can be customized in a
limited way. The screen and configuration design is based on our long-lasting experience with
integration in customer apps.</li>
<li>In the <em>Component API</em> we provide fragments for advanced integration
with more freedom for customization.</li>
</ul>
<div class="section" id="screen-api">
<h6>Screen API<a class="headerlink" href="#screen-api" title="Permalink to this headline">¶</a></h6>
<p>This is the easiest way to use the capture flow. You only need to:</p>
<ol class="arabic simple">
<li>Request camera access,</li>
<li>Configure the capture feature using the <code class="docutils literal notranslate"><span class="pre">CaptureConfiguration</span></code>,</li>
<li>Register an activity result handler with the <code class="docutils literal notranslate"><span class="pre">CaptureFlowContract()</span></code>,</li>
<li>Start the capture flow.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Check out the <a class="reference external" href="https://github.com/gini/gini-pay-bank-sdk-android/tree/main/appscreenapi">Screen API example app</a> to see how an integration could look
like.</p>
</div>
<p>The following example shows how to launch the capture flow using the <em>Screen API</em> and how to handle the results:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// Use the androidx&#39;s Activity Result API to register a handler for the capture result.</span>
<span class="n">val</span> <span class="n">captureLauncher</span> <span class="o">=</span> <span class="n">registerForActivityResult</span><span class="p">(</span><span class="n">CaptureFlowContract</span><span class="p">())</span> <span class="p">{</span> <span class="n">result</span><span class="p">:</span> <span class="n">CaptureResult</span> <span class="o">-&gt;</span>
    <span class="n">when</span> <span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">is</span> <span class="n">CaptureResult</span><span class="p">.</span><span class="na">Success</span> <span class="o">-&gt;</span> <span class="p">{</span>
            <span class="n">handleExtractions</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">specificExtractions</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="n">is</span> <span class="n">CaptureResult</span><span class="p">.</span><span class="na">Error</span> <span class="o">-&gt;</span> <span class="p">{</span>
            <span class="n">when</span> <span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">value</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">is</span> <span class="n">ResultError</span><span class="p">.</span><span class="na">Capture</span> <span class="o">-&gt;</span> <span class="p">{</span>
                    <span class="n">val</span> <span class="n">captureError</span><span class="p">:</span> <span class="n">GiniCaptureError</span> <span class="o">=</span> <span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">value</span> <span class="n">as</span> <span class="n">ResultError</span><span class="p">.</span><span class="na">Capture</span><span class="p">).</span><span class="na">giniCaptureError</span>
                    <span class="n">handleCaptureError</span><span class="p">(</span><span class="n">captureError</span><span class="p">)</span>
                <span class="p">}</span>
                <span class="n">is</span> <span class="n">ResultError</span><span class="p">.</span><span class="na">FileImport</span> <span class="o">-&gt;</span> <span class="p">{</span>
                    <span class="c1">// See the File Import section on the Capture Features page for more details.</span>
                    <span class="n">val</span> <span class="n">fileImportError</span> <span class="o">=</span> <span class="n">result</span><span class="p">.</span><span class="na">value</span> <span class="n">as</span> <span class="n">ResultError</span><span class="p">.</span><span class="na">FileImport</span>
                    <span class="nf">handleFileImportError</span><span class="p">(</span><span class="n">fileImportError</span><span class="p">)</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="n">CaptureResult</span><span class="p">.</span><span class="na">Empty</span> <span class="o">-&gt;</span> <span class="p">{</span>
            <span class="n">handleNoExtractions</span><span class="p">()</span>
        <span class="p">}</span>
        <span class="n">CaptureResult</span><span class="p">.</span><span class="na">Cancel</span> <span class="o">-&gt;</span> <span class="p">{</span>
            <span class="n">handleCancellation</span><span class="p">()</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">fun</span> <span class="nf">launchGiniCapture</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Make sure camera permission has been already granted at this point.</span>

    <span class="c1">// Check that the device fulfills the requirements.</span>
    <span class="n">val</span> <span class="n">report</span> <span class="o">=</span> <span class="n">GiniCaptureRequirements</span><span class="p">.</span><span class="na">checkRequirements</span><span class="p">((</span><span class="n">Context</span><span class="p">)</span> <span class="k">this</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">report</span><span class="p">.</span><span class="na">isFulfilled</span><span class="p">())</span> <span class="p">{</span>
        <span class="n">handleUnfulfilledRequirements</span><span class="p">(</span><span class="n">report</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c1">// Instantiate the networking implementations.</span>
    <span class="n">val</span> <span class="n">networkService</span><span class="p">:</span> <span class="n">GiniCaptureNetworkService</span>  <span class="o">=</span> <span class="p">...</span>
    <span class="n">val</span> <span class="n">networkApi</span><span class="p">:</span> <span class="n">GiniCaptureNetworkApi</span> <span class="o">=</span> <span class="p">...</span>

    <span class="c1">// Cleanup to make sure everything is reset.</span>
    <span class="n">GiniPayBank</span><span class="p">.</span><span class="na">releaseCapture</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>

    <span class="c1">// Configure the capture feature.</span>
    <span class="n">GiniPayBank</span><span class="p">.</span><span class="na">setCaptureConfiguration</span><span class="p">(</span>
        <span class="n">CaptureConfiguration</span><span class="p">(</span>
            <span class="n">networkService</span> <span class="o">=</span> <span class="n">networkService</span><span class="p">,</span>
            <span class="n">networkApi</span> <span class="o">=</span> <span class="n">networkApi</span><span class="p">,</span>
            <span class="p">...</span>
        <span class="p">)</span>
    <span class="p">)</span>

    <span class="c1">// Launch and wait for the result.</span>
    <span class="n">GiniPayBank</span><span class="p">.</span><span class="na">startCaptureFlow</span><span class="p">(</span><span class="n">captureLauncher</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="component-api">
<h6>Component API<a class="headerlink" href="#component-api" title="Permalink to this headline">¶</a></h6>
<p>This is the more complicated way of using the capture flow. The advantage is that it is based on fragments and you
have full control over how these are shown in your UI.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Check out the <a class="reference external" href="https://github.com/gini/gini-pay-bank-sdk-android/tree/main/appcomponentapi">Component API example app</a> to see how an integration could look
like.</p>
</div>
<p>Before launching the first fragment you need to:</p>
<ol class="arabic simple">
<li>Request camera access,</li>
<li>Configure the capture feature using the <code class="docutils literal notranslate"><span class="pre">CaptureConfiguration</span></code>.</li>
</ol>
<p>The Component API is exposed as-is from the Gini Capture SDK and you can follow <a class="reference external" href="https://developer.gini.net/gini-capture-sdk-android/html/integration.html#component-api">it’s guide</a> to learn how to integrate
it.</p>
</div>
</div>
</div>
<div class="section" id="handling-payment-requests">
<h4>Handling Payment Requests<a class="headerlink" href="#handling-payment-requests" title="Permalink to this headline">¶</a></h4>
<p>The Gini Pay Bank SDK enables your app to handle payment requests started by the Gini Pay Business SDK in another app.
You can retrieve the payment requests’s content, mark the payment request as payed and also return your user to the app
that created the payment request.</p>
<div class="section" id="id5">
<h5>Networking<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h5>
<p>The pay feature depends on the <a class="reference external" href="https://github.com/gini/gini-pay-api-lib-android">Gini Pay API Library</a>, which
provides an entry point through the <code class="docutils literal notranslate"><span class="pre">Gini</span></code> class.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You should have received Gini Pay API client credentials from us. Please get in touch with us in case you don’t have
them. Without credentials you won’t be able to use the Gini Pay API.</p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">Gini</span></code> class can be built either with client credentials or with a <code class="docutils literal notranslate"><span class="pre">SessionManager</span></code> if you already have an
authorization token. We provide helper methods for each case:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">getGiniApi</span><span class="p">(</span><span class="n">context</span><span class="p">:</span> <span class="n">Context</span><span class="p">,</span> <span class="n">clientId</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span> <span class="n">clientSecret</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span>
           <span class="n">emailDomain</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">getGiniApi</span><span class="p">(</span><span class="n">context</span><span class="p">:</span> <span class="n">Context</span><span class="p">,</span> <span class="n">sessionManager</span><span class="p">:</span> <span class="n">SessionManager</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">SessionManager</span></code> is an interface which you need to implement to send the token.</p>
<p>For more details about the <code class="docutils literal notranslate"><span class="pre">Gini</span></code> class see the Gini Pay API Library’s <a class="reference external" href="https://developer.gini.net/gini-pay-api-lib-android/guides/getting-started.html#creating-the-gini-instance">documentation</a>.</p>
<p>Once you have a <code class="docutils literal notranslate"><span class="pre">Gini</span></code> instance you need to pass it to <code class="docutils literal notranslate"><span class="pre">GiniPayBank.setGiniApi()</span></code>:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">val</span> <span class="n">giniApi</span> <span class="o">=</span> <span class="n">getGiniApi</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">myClientId</span><span class="p">,</span> <span class="n">myClientSecret</span><span class="p">,</span> <span class="n">myEmailDomain</span><span class="p">)</span>

<span class="n">GiniPayBank</span><span class="p">.</span><span class="na">setGiniApi</span><span class="p">(</span><span class="n">giniApi</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id7">
<h5>Android Manifest<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h5>
<p>To be able to receive payment requests you need to add an intent filter for the ginipay URI to your manifest. This also
allows the Gini Pay Business SDK to detect if your app is installed:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;intent-filter&gt;</span>
    <span class="nt">&lt;action</span> <span class="na">android:name=</span><span class="s">&quot;android.intent.action.VIEW&quot;</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;category</span> <span class="na">android:name=</span><span class="s">&quot;android.intent.category.DEFAULT&quot;</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;data</span>
        <span class="na">android:host=</span><span class="s">&quot;payment&quot;</span>
        <span class="na">android:scheme=</span><span class="s">&quot;ginipay&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/intent-filter&gt;</span>
</pre></div>
</div>
<p>The intent filter can be added to the activity which will handle the payment flow of that payment request.</p>
</div>
<div class="section" id="package-name">
<h5>Package Name<a class="headerlink" href="#package-name" title="Permalink to this headline">¶</a></h5>
<p>You also need to tell us your app’s package name. It will be associated with the payment provider we
create for your banking app in the Gini Pay API. The Gini Pay Business SDK will only open your banking app if
it is installed and it has the same package name as the one known by the Gini Pay API.</p>
<p>If you have different package names for development and production
then please share both of them with us so that we can use the right one for each environment.</p>
</div>
<div class="section" id="receive-payment-requests">
<h5>Receive Payment Requests<a class="headerlink" href="#receive-payment-requests" title="Permalink to this headline">¶</a></h5>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can see an example implementation in the Screen API example app’s <a class="reference external" href="https://github.com/gini/gini-pay-bank-sdk-android/tree/main/appscreenapi/src/main/java/net/gini/pay/appscreenapi/pay">pay</a>
package.</p>
</div>
<p>When your activity is launched with an intent you should follow the steps below to receive and handle the payment
request:</p>
<ol class="arabic">
<li><p class="first">Extract the payment request id from the intent with <code class="docutils literal notranslate"><span class="pre">getRequestId()</span></code>:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">val</span> <span class="n">requestId</span> <span class="o">=</span> <span class="n">getRequestId</span><span class="p">(</span><span class="n">intent</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Retrieve the payment details set by the business app using <code class="docutils literal notranslate"><span class="pre">GiniPayBank.getPaymentRequest()</span></code>:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">val</span> <span class="n">paymentRequest</span><span class="p">:</span> <span class="n">PaymentRequest</span> <span class="o">=</span> <span class="n">giniPayBank</span><span class="p">.</span><span class="na">getPaymentRequest</span><span class="p">(</span><span class="n">requestId</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Show the payment details to your user:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">showPaymentDetails</span><span class="p">(</span>
    <span class="n">paymentRequest</span><span class="p">.</span><span class="na">recipient</span><span class="p">,</span>
    <span class="n">paymentRequest</span><span class="p">.</span><span class="na">iban</span><span class="p">,</span>
    <span class="n">paymentRequest</span><span class="p">.</span><span class="na">bic</span><span class="p">,</span>
    <span class="n">paymentRequest</span><span class="p">.</span><span class="na">amount</span><span class="p">,</span>
    <span class="n">paymentRequest</span><span class="p">.</span><span class="na">purpose</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">After your user has initiated the payment mark the payment request as paid using
<code class="docutils literal notranslate"><span class="pre">GiniPayBank.resolvePaymentRequest()</span></code>:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// The actual payment details used for the payment (as corrected and accepted by the user).</span>
<span class="n">val</span> <span class="n">usedPaymentDetails</span> <span class="o">=</span> <span class="n">ResolvePaymentInput</span><span class="p">(</span>
    <span class="n">recipient</span> <span class="o">=</span> <span class="s">&quot;...&quot;</span><span class="p">,</span>
    <span class="n">iban</span> <span class="o">=</span> <span class="s">&quot;...&quot;</span><span class="p">,</span>
    <span class="n">bic</span> <span class="o">=</span> <span class="s">&quot;...&quot;</span><span class="p">,</span>
    <span class="n">amount</span> <span class="o">=</span> <span class="s">&quot;...&quot;</span><span class="p">,</span>
    <span class="n">purpose</span> <span class="o">=</span> <span class="s">&quot;...&quot;</span>
<span class="p">)</span>

<span class="n">val</span> <span class="n">resolvedPayment</span><span class="p">:</span> <span class="n">ResolvedPayment</span> <span class="o">=</span> <span class="n">giniPayBank</span><span class="p">.</span><span class="na">resolvePaymentRequest</span><span class="p">(</span><span class="n">requestId</span><span class="p">,</span> <span class="n">usedPaymentDetails</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">You can allow your user to return to the business app that started the flow using <code class="docutils literal notranslate"><span class="pre">GiniPayBank.returnToBusiness()</span></code>:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">giniPayBank</span><span class="p">.</span><span class="na">returnToBusiness</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">resolvedPayment</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="testing">
<h5>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h5>
<p>Testing the payment feature requires an app which uses the Gini Pay Business SDK to create payment requests and to
forward them to your banking app to view and resolve those payment requests.</p>
<div class="section" id="requirements">
<h6>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h6>
<div class="section" id="example-business-app">
<h7>Example business app<a class="headerlink" href="#example-business-app" title="Permalink to this headline">¶</a></h7>
<p>An example business app is available in the <a class="reference external" href="https://github.com/gini/gini-pay-business-sdk-android">Gini Pay Business SDK’s</a>
repository.</p>
<p>You can use the same Gini Pay API client credentials in the example business app as in your app, if not otherwise
specified.</p>
<div class="section" id="development-gini-pay-api-client-credentials">
<h8>Development Gini Pay API client credentials<a class="headerlink" href="#development-gini-pay-api-client-credentials" title="Permalink to this headline">¶</a></h8>
<p>In order to test using our example business app you need to use development client credentials. This will make sure
the Gini Pay Business SDK will use a payment provider which will open your development banking app.</p>
</div>
</div>
</div>
<div class="section" id="end-to-end-testing">
<h6>End to end testing<a class="headerlink" href="#end-to-end-testing" title="Permalink to this headline">¶</a></h6>
<p>After you’ve set the client credentials in the example business app you can install it along with your banking app on
your device.</p>
<p>Run the example business app and import an invoice or take a picture of one to start the payment flow.</p>
<p>After following the integration steps above your banking app will be launched and you’ll be able to fetch the payment
request, show the payment information and resolve the payment after the transaction has been confirmed. At this point,
you may redirect back to the business app.</p>
<p>With these steps completed you have verified that your app, the Gini Pay API, the Gini Pay Business SDK and the Gini Pay
Bank SDK work together correctly.</p>
</div>
<div class="section" id="testing-in-production">
<h6>Testing in production<a class="headerlink" href="#testing-in-production" title="Permalink to this headline">¶</a></h6>
<p>The steps are the same but instead of the development client credentials you will need to use production client
credentials. This will make sure the Gini Pay Business SDK receives real payment providers including the one which
opens your production banking app.</p>
<p>For testing the flow using the example business app please make sure that the production client credentials are used
before installing it.</p>
<p>You can also test with a real business app. Please contact us in case you don’t know which business app(s) to install
for starting the payment flow.</p>
</div>
</div>
</div>
</div>
<span id="document-capture-features"></span><div class="section" id="invoice-capture-features">
<h3>Invoice Capture Features<a class="headerlink" href="#invoice-capture-features" title="Permalink to this headline">¶</a></h3>
<div class="section" id="features-from-the-gini-capture-sdk">
<h4>Features from the Gini Capture SDK<a class="headerlink" href="#features-from-the-gini-capture-sdk" title="Permalink to this headline">¶</a></h4>
<p>The capture feature uses our <a class="reference external" href="https://github.com/gini/gini-capture-sdk-android/">Gini Capture SDK</a>. All features
listed in its <a class="reference external" href="https://developer.gini.net/gini-capture-sdk-android/html/features.html">documentation</a> can be used here
as well.</p>
<p>An important difference is in how you configure the capture features. In the Gini Pay Bank SDK you need to use the
<code class="docutils literal notranslate"><span class="pre">CaptureConfiguration</span></code> instead of the Gini Capture SDK’s <code class="docutils literal notranslate"><span class="pre">GiniCapture.Builder</span></code>. The configuration names are the same
so you can easily map them to the <code class="docutils literal notranslate"><span class="pre">CaptureConfiguration</span></code>.</p>
<div class="section" id="file-import-open-with">
<h5>File Import (Open With)<a class="headerlink" href="#file-import-open-with" title="Permalink to this headline">¶</a></h5>
<p>Another difference is related to the <a class="reference external" href="https://developer.gini.net/gini-capture-sdk-android/html/features.html#file-import-open-with">file import</a> (or “open with”)
feature which allows importing of files from other apps via Android’s “open with” or “share” functionality.</p>
<div class="section" id="screen-api">
<h6>Screen API<a class="headerlink" href="#screen-api" title="Permalink to this headline">¶</a></h6>
<p>To handle imported files using the Gini Pay Bank SDK you need to register an activity result handler with the
<code class="docutils literal notranslate"><span class="pre">CaptureFlowImportContract()</span></code> and then pass the incoming intent to
<code class="docutils literal notranslate"><span class="pre">GiniPayBank.GiniPayBank.startCaptureFlowForIntent()</span></code>:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// Use the androidx&#39;s Activity Result API to register a handler for the capture result.</span>
<span class="n">val</span> <span class="n">captureImportLauncher</span> <span class="o">=</span> <span class="n">registerForActivityResult</span><span class="p">(</span><span class="n">CaptureFlowImportContract</span><span class="p">())</span> <span class="p">{</span> <span class="n">result</span><span class="p">:</span> <span class="n">CaptureResult</span> <span class="o">-&gt;</span>
    <span class="n">when</span> <span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">is</span> <span class="n">CaptureResult</span><span class="p">.</span><span class="na">Success</span> <span class="o">-&gt;</span> <span class="p">{</span>
            <span class="n">handleExtractions</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">specificExtractions</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="n">is</span> <span class="n">CaptureResult</span><span class="p">.</span><span class="na">Error</span> <span class="o">-&gt;</span> <span class="p">{</span>
            <span class="n">when</span> <span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">value</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">is</span> <span class="n">ResultError</span><span class="p">.</span><span class="na">Capture</span> <span class="o">-&gt;</span> <span class="p">{</span>
                    <span class="n">val</span> <span class="n">captureError</span><span class="p">:</span> <span class="n">GiniCaptureError</span> <span class="o">=</span> <span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">value</span> <span class="n">as</span> <span class="n">ResultError</span><span class="p">.</span><span class="na">Capture</span><span class="p">).</span><span class="na">giniCaptureError</span>
                    <span class="n">handleCaptureError</span><span class="p">(</span><span class="n">captureError</span><span class="p">)</span>
                <span class="p">}</span>
                <span class="n">is</span> <span class="n">ResultError</span><span class="p">.</span><span class="na">FileImport</span> <span class="o">-&gt;</span> <span class="p">{</span>
                    <span class="n">val</span> <span class="n">fileImportError</span> <span class="o">=</span> <span class="n">result</span><span class="p">.</span><span class="na">value</span> <span class="n">as</span> <span class="n">ResultError</span><span class="p">.</span><span class="na">FileImport</span>
                    <span class="nf">handleFileImportError</span><span class="p">(</span><span class="n">fileImportError</span><span class="p">)</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="n">CaptureResult</span><span class="p">.</span><span class="na">Empty</span> <span class="o">-&gt;</span> <span class="p">{</span>
            <span class="n">handleNoExtractions</span><span class="p">()</span>
        <span class="p">}</span>
        <span class="n">CaptureResult</span><span class="p">.</span><span class="na">Cancel</span> <span class="o">-&gt;</span> <span class="p">{</span>
            <span class="n">handleCancellation</span><span class="p">()</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">fun</span> <span class="nf">handleFileImportError</span><span class="p">(</span><span class="n">exception</span><span class="p">:</span> <span class="n">ImportedFileValidationException</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="n">message</span> <span class="o">=</span> <span class="p">...</span>
    <span class="n">exception</span><span class="p">.</span><span class="na">validationError</span><span class="o">?</span><span class="p">.</span><span class="na">let</span> <span class="p">{</span> <span class="n">validationError</span> <span class="o">-&gt;</span>
        <span class="c1">// Get the default message</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">getString</span><span class="p">(</span><span class="n">validationError</span><span class="p">.</span><span class="na">textResource</span><span class="p">)</span>
        <span class="c1">// Or use custom messages</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">when</span> <span class="p">(</span><span class="n">validationError</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">FileImportValidator</span><span class="p">.</span><span class="na">Error</span><span class="p">.</span><span class="na">TYPE_NOT_SUPPORTED</span> <span class="o">-&gt;</span> <span class="p">...</span>
            <span class="n">FileImportValidator</span><span class="p">.</span><span class="na">Error</span><span class="p">.</span><span class="na">SIZE_TOO_LARGE</span> <span class="o">-&gt;</span> <span class="p">...</span>
            <span class="n">FileImportValidator</span><span class="p">.</span><span class="na">Error</span><span class="p">.</span><span class="na">TOO_MANY_PDF_PAGES</span> <span class="o">-&gt;</span> <span class="p">...</span>
            <span class="n">FileImportValidator</span><span class="p">.</span><span class="na">Error</span><span class="p">.</span><span class="na">PASSWORD_PROTECTED_PDF</span> <span class="o">-&gt;</span> <span class="p">...</span>
            <span class="n">FileImportValidator</span><span class="p">.</span><span class="na">Error</span><span class="p">.</span><span class="na">TOO_MANY_DOCUMENT_PAGES</span> <span class="o">-&gt;</span> <span class="p">...</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">AlertDialog</span><span class="p">.</span><span class="na">Builder</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
        <span class="p">.</span><span class="na">setMessage</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="p">.</span><span class="na">setPositiveButton</span><span class="p">(</span><span class="s">&quot;OK&quot;</span><span class="p">)</span> <span class="p">{</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">-&gt;</span> <span class="n">finish</span><span class="p">()</span> <span class="p">}</span>
        <span class="p">.</span><span class="na">show</span><span class="p">()</span>
<span class="p">}</span>

<span class="n">fun</span> <span class="nf">startGiniPayBankSDKForImportedFile</span><span class="p">(</span><span class="n">importedFileIntent</span><span class="p">:</span> <span class="n">Intent</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Configure capture first</span>
    <span class="n">configureCapture</span><span class="p">();</span>

    <span class="n">fileImportCancellationToken</span> <span class="o">=</span>
        <span class="n">GiniPayBank</span><span class="p">.</span><span class="na">startCaptureFlowForIntent</span><span class="p">(</span><span class="n">captureImportLauncher</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="n">importedFileIntent</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="component-api">
<h6>Component API<a class="headerlink" href="#component-api" title="Permalink to this headline">¶</a></h6>
<p>When using the Component API you need to create a <code class="docutils literal notranslate"><span class="pre">Document</span></code> from the intent using
<code class="docutils literal notranslate"><span class="pre">GiniPayBank.createDocumentForImportedFiles()</span></code> and then continue either to the <code class="docutils literal notranslate"><span class="pre">ReviewFragmentCompat</span></code>,
<code class="docutils literal notranslate"><span class="pre">MultiPageReviewFragment</span></code> or <code class="docutils literal notranslate"><span class="pre">AnalysisFragmentCompat</span></code>:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">fun</span> <span class="nf">startGiniPayBankSDKForImportedFile</span><span class="p">(</span><span class="n">importedFileIntent</span><span class="p">:</span> <span class="n">Intent</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">GiniPayBank</span><span class="p">.</span><span class="na">createDocumentForImportedFiles</span><span class="p">(</span><span class="n">importedFileIntent</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="n">object</span> <span class="p">:</span> <span class="n">AsyncCallback</span><span class="o">&lt;</span><span class="n">Document</span><span class="p">,</span> <span class="n">ImportedFileValidationException</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="n">override</span> <span class="n">fun</span> <span class="nf">onSuccess</span><span class="p">(</span><span class="n">result</span><span class="p">:</span> <span class="n">Document</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">isReviewable</span><span class="p">)</span> <span class="p">{</span>
                <span class="c1">// If you have enabled capturing documents with multiple pages:</span>
                <span class="n">launchMultiPageReviewScreen</span><span class="p">()</span>
                <span class="c1">// OR if you didn&#39;t:</span>
                <span class="n">launchSinglePageReviewScreen</span><span class="p">()</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="n">launchAnalysisScreen</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
            <span class="p">}</span>
            <span class="n">finish</span><span class="p">()</span>
        <span class="p">}</span>

        <span class="n">override</span> <span class="n">fun</span> <span class="nf">onError</span><span class="p">(</span><span class="n">exception</span><span class="p">:</span> <span class="n">ImportedFileValidationException</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">handleFileImportError</span><span class="p">(</span><span class="n">exception</span><span class="p">)</span>
        <span class="p">}</span>

        <span class="n">override</span> <span class="n">fun</span> <span class="nf">onCancelled</span><span class="p">()</span> <span class="p">{</span>
            <span class="c1">// Handle cancellation.</span>
        <span class="p">}</span>
    <span class="p">})</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="return-assistant">
<h4>Return Assistant<a class="headerlink" href="#return-assistant" title="Permalink to this headline">¶</a></h4>
<p>The return assistant feature allows your users to view and edit payable items in an invoice. The total amount is
updated to be the sum of only those items which the user opts to pay.</p>
<p>To enable this feature simply set <code class="docutils literal notranslate"><span class="pre">returnAssistantEnabled</span></code> to <code class="docutils literal notranslate"><span class="pre">true</span></code> in the <code class="docutils literal notranslate"><span class="pre">CaptureConfiguration</span></code>:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">CaptureConfiguration</span><span class="p">(</span><span class="n">returnAssistantEnabled</span> <span class="o">=</span> <span class="kc">true</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="id1">
<h5>Screen API<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h5>
<p>When integrating using the Screen API it is enough to enable the return assistant feature. The Gini Pay Bank SDK will
show the return assistant automatically if the invoice contained payable items and will update the extractions returned
to your app according to the user’s changes.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">amountToPay</span></code> extraction is updated to be the sum of items the user decided to pay. It includes discounts and
additional charges that might be present on the invoice.</p>
<p>The extractions related to the return assistant are stored in the <code class="docutils literal notranslate"><span class="pre">compoundExtractions</span></code> field of the
<code class="docutils literal notranslate"><span class="pre">CaptureResult</span></code>. See the Gini Pay API’s <a class="reference external" href="https://pay-api.gini.net/documentation/#return-assistant-extractions">documentation</a> to learn about the return assistant’s compound
extractions.</p>
</div>
<div class="section" id="id3">
<h5>Component API<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h5>
<p>Using the Component API is more challenging. You need to manage three additional fragments: <code class="docutils literal notranslate"><span class="pre">DigitalInvoiceFragment</span></code>,
<code class="docutils literal notranslate"><span class="pre">DigitalInvoiceOnboardingFragment</span></code> and <code class="docutils literal notranslate"><span class="pre">LineItemDetailsFragment</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">See the Component API example app’s <a class="reference external" href="https://github.com/gini/gini-pay-bank-sdk-android/tree/main/appcomponentapi/src/main/java/net/gini/pay/appcomponentapi/digitalinvoice">digitalinvoice package</a>
for a sample integration.</p>
</div>
<p>The following diagram extends the one found in the Gini Capture SDK’s <a class="reference external" href="https://developer.gini.net/gini-capture-sdk-android/html/integration.html#component-api">Component API guide</a>. It shows the possible flows
through the SDK based on the listener method invocations. For brevity each fragment’s listener is shown next to it. In
your integration you will provide the listener implementations and handle the listener method calls. You should navigate
to the appropriate fragment based on this diagram.</p>
<p>The part related to the return assistant is in the lower right corner:</p>
<a class="reference internal image-reference" href="_images/Return-Assistant-Component-API.jpg"><img alt="Diagram of possible flows through the SDK with the Component API fragments and their listeners including the return assistant." src="_images/Return-Assistant-Component-API.jpg" style="width: 100%;" /></a>
<div class="section" id="digitalinvoicefragment">
<h6>DigitalInvoiceFragment<a class="headerlink" href="#digitalinvoicefragment" title="Permalink to this headline">¶</a></h6>
<p>This is the entry point for the return assistant. It displays the line items extracted from an invoice and their total
price. The user can deselect line items which should not be paid for and also edit the quantity, price or description of
each line item. The total price is always updated to include only the selected line items.</p>
<p>The returned extractions in the <code class="docutils literal notranslate"><span class="pre">DigitalInvoiceFragmentListener.onPayInvoice()</span></code> are updated to include the user’s
modifications:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">amountToPay</span></code> in the specific extractions is updated to contain the sum of the selected line items’ prices.</li>
<li>The line items in the compound extractions are also updated according to the user’s modifications.</li>
</ul>
<p>Before showing the <code class="docutils literal notranslate"><span class="pre">DigitalInvoiceFragment</span></code> you should validate the compound extractions
using the <code class="docutils literal notranslate"><span class="pre">LineItemsValidator</span></code>. These extractions are returned in the <code class="docutils literal notranslate"><span class="pre">AnalysisFragmentListener.onExtractionsAvailable()]</span></code>
listener method:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">override</span> <span class="n">fun</span> <span class="nf">onExtractionsAvailable</span><span class="p">(</span>
    <span class="n">extractions</span><span class="p">:</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">GiniCaptureSpecificExtraction</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="n">compoundExtractions</span><span class="p">:</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">GiniCaptureCompoundExtraction</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="n">returnReasons</span><span class="p">:</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">GiniCaptureReturnReason</span><span class="o">&gt;</span>
<span class="p">)</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="c1">// Check whether the compound extractions contain valid line items or not</span>
        <span class="n">LineItemsValidator</span><span class="p">.</span><span class="na">validate</span><span class="p">(</span><span class="n">compoundExtractions</span><span class="p">)</span>

        <span class="c1">// At this point there are valid line items and you can start the return assistant</span>
        <span class="n">val</span> <span class="n">fragment</span> <span class="o">=</span> <span class="n">DigitalInvoiceFragment</span><span class="p">.</span><span class="na">createInstance</span><span class="p">(</span><span class="n">extractions</span><span class="p">,</span> <span class="n">compoundExtractions</span><span class="p">,</span> <span class="n">returnReasons</span><span class="p">)</span>
        <span class="n">startReturnAssistant</span><span class="p">(</span><span class="n">fragment</span><span class="p">)</span>

    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">notUsed</span><span class="p">:</span> <span class="n">DigitalInvoiceException</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// There were no valid line items and you can proceed directly to handling the extractions</span>
        <span class="c1">// without the return assistant</span>
        <span class="n">handleExtractions</span><span class="p">(</span><span class="n">extractions</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A <code class="docutils literal notranslate"><span class="pre">DigitalInvoiceFragmentListener</span></code> instance must be available before the <code class="docutils literal notranslate"><span class="pre">DigitalInvoiceFragment</span></code> is attached to an
Activity. Failing to do so will throw an exception. The listener instance can be provided either implicitly by making
the hosting Activity implement the <code class="docutils literal notranslate"><span class="pre">DigitalInvoiceFragmentListener</span></code> interface or explicitly by setting the listener
using the <code class="docutils literal notranslate"><span class="pre">DigitalInvoiceFragment.listener</span></code> property.</p>
</div>
<div class="section" id="digitalinvoiceonboardingfragment">
<h6>DigitalInvoiceOnboardingFragment<a class="headerlink" href="#digitalinvoiceonboardingfragment" title="Permalink to this headline">¶</a></h6>
<p>This fragment shows the onboarding screen related to the return assistant. It displays information about the return
assistant to the user.</p>
<p>You should show the <code class="docutils literal notranslate"><span class="pre">DigitalInvoiceOnboardingFragment</span></code> when the <code class="docutils literal notranslate"><span class="pre">DigitalInvoiceFragmentListener.showOnboarding()</span></code> is
called.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">DigitalInvoiceOnboardingFragmentListener</span></code> instance must be available before the
<code class="docutils literal notranslate"><span class="pre">DigitalInvoiceOnboardingFragment</span></code> is attached to an activity. Failing to do so will throw an exception. The listener
instance can be provided either implicitly by making the host Activity implement the
<code class="docutils literal notranslate"><span class="pre">DigitalInvoiceOnboardingFragmentListener</span></code> interface or explicitly by setting the listener using the
<code class="docutils literal notranslate"><span class="pre">DigitalInvoiceOnboardingFragment.listener</span></code> property.</p>
</div>
<div class="section" id="lineitemdetailsfragment">
<h6>LineItemDetailsFragment<a class="headerlink" href="#lineitemdetailsfragment" title="Permalink to this headline">¶</a></h6>
<p>This fragment allows the user to edit the details of a line item: description, quantity and price. It also allows the
user to deselect the line item.</p>
<p>The returned line item in the <code class="docutils literal notranslate"><span class="pre">LineItemDetailsFragmentListener.onSave()</span></code> listener method is updated to contain the
user’s modifications.</p>
<p>You should show the LineItemDetailsFragment when the <code class="docutils literal notranslate"><span class="pre">DigitalInvoiceFragmentListener.onEditLineItem()</span></code> is called.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">LineItemDetailsFragmentListener</span></code> instance must be available before the <code class="docutils literal notranslate"><span class="pre">LineItemDetailsFragment</span></code> is attached to
an activity. Failing to do so will throw an exception. The listener instance can be provided either implicitly by making
the host Activity implement the <code class="docutils literal notranslate"><span class="pre">LineItemDetailsFragmentListener</span></code> interface or explicitly by setting the listener
using the <code class="docutils literal notranslate"><span class="pre">LineItemDetailsFragment.listener</span></code> property.</p>
</div>
</div>
<div class="section" id="sending-feedback">
<h5>Sending Feedback<a class="headerlink" href="#sending-feedback" title="Permalink to this headline">¶</a></h5>
<p>Your app should send feedback for the extractions related to the return assistant. These extractions are found in the
<code class="docutils literal notranslate"><span class="pre">compoundExtractions</span></code> field of the <code class="docutils literal notranslate"><span class="pre">CaptureResult</span></code> if you are using the Screen API and in the
<code class="docutils literal notranslate"><span class="pre">compoundExtractions</span></code> parameter of the <code class="docutils literal notranslate"><span class="pre">DigitalInvoiceFragmentListener.onPayInvoice()</span></code> listener method if you use
the Component API.</p>
<div class="section" id="default-networking-implementation">
<h6>Default Networking Implementation<a class="headerlink" href="#default-networking-implementation" title="Permalink to this headline">¶</a></h6>
<p>If you use the <code class="docutils literal notranslate"><span class="pre">GiniCaptureDefaultNetworkService</span></code> and the <code class="docutils literal notranslate"><span class="pre">GiniCaptureDefaultNetworkApi</span></code> then sending feedback for
the return assistant extractions is done by the <code class="docutils literal notranslate"><span class="pre">GiniCaptureDefaultNetworkApi</span></code> when you send feedback for the payment
data extractions as described in the <a class="reference external" href="integration.html#sending-feedback">Sending Feedback</a> section.</p>
</div>
<div class="section" id="custom-networking-implementation">
<h6>Custom Networking Implementation<a class="headerlink" href="#custom-networking-implementation" title="Permalink to this headline">¶</a></h6>
<p>If you use your own networking implementation and directly communicate with the Gini Pay API then see <a class="reference external" href="https://pay-api.gini.net/documentation/#submitting-feedback-on-extractions">this section</a> in its documentation on how to send
feedback for the compound extractions.</p>
<p>In case you use the Gini Pay API Library then sending compound extraction feedback is very similar to how it’s shown in <a class="reference external" href="https://developer.gini.net/gini-pay-api-lib-android/guides/common-tasks.html#sending-feedback">this section</a> in its documentation. The only difference is that you need to also pass in the <code class="docutils literal notranslate"><span class="pre">CompoundExtraction</span></code> map to <code class="docutils literal notranslate"><span class="pre">DocumentTaskManager.sendFeebackForExtractions()</span></code>:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// Extractions seen and accepted by the user (including user modifications)</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">SpecificExtraction</span><span class="o">&gt;</span> <span class="n">specificExtractionFeedback</span><span class="p">;</span>

<span class="c1">// Return assistant extractions as returned by the CaptureResult or DigitalInvoiceFragmentListener</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">CompoundExtraction</span><span class="o">&gt;</span> <span class="n">compoundExtractionFeedback</span><span class="p">;</span>

<span class="kd">final</span> <span class="n">Task</span><span class="o">&lt;</span><span class="n">Document</span><span class="o">&gt;</span> <span class="n">sendFeedback</span> <span class="o">=</span> <span class="n">documentTaskManager</span><span class="p">.</span><span class="na">sendFeedbackForExtractions</span><span class="p">(</span><span class="n">document</span><span class="p">,</span>
        <span class="n">specificExtractionFeedback</span><span class="p">,</span> <span class="n">compoundExtractionFeedback</span><span class="p">);</span>
<span class="n">sendFeedback</span><span class="p">.</span><span class="na">waitForCompletion</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<span id="document-customization"></span><div class="section" id="customization">
<h3>Customization<a class="headerlink" href="#customization" title="Permalink to this headline">¶</a></h3>
<p>Customization is achieved through Android’s resourcing system. This means that all <a class="reference external" href="https://github.com/gini/gini-pay-bank-sdk-android/tree/main/ginipaybank/src/main/res">resources of the Gini Pay Bank SDK</a> can be overridden by providing
resources with the same name in your application.</p>
<p>The capture related screens are provided by the <a class="reference external" href="https://github.com/gini/gini-capture-sdk-android">Gini Capture SDK</a>
and for those screens you need to override <a class="reference external" href="https://github.com/gini/gini-capture-sdk-android/tree/main/ginicapture/src/main/res">it’s resources</a>. Please consult the
<a class="reference external" href="https://developer.gini.net/gini-capture-sdk-android/html/customization-guide.html">customization guide</a> for the Gini
Capture SDK to view a screen based overview of the customizable resources.</p>
<p>When you override styles please make sure that you use the parent style with the <code class="docutils literal notranslate"><span class="pre">Root.</span></code> prefix. This ensures that
your custom style items are merged with the default ones.</p>
</div>
<span id="document-migrating-from-gvl"></span><div class="section" id="migrating-from-the-gini-vision-library">
<h3>Migrating from the Gini Vision Library<a class="headerlink" href="#migrating-from-the-gini-vision-library" title="Permalink to this headline">¶</a></h3>
<p>Please note that this guide is for migrating from Gini Vision Library version 3.x or 4.x. In case you are using an older
version please consult our Gini Vision Library <a class="reference external" href="https://developer.gini.net/gini-vision-lib-android/html/updating-to-3-0-0.html">migration guides</a> to update to the latest version.</p>
<div class="section" id="kotlin">
<h4>Kotlin<a class="headerlink" href="#kotlin" title="Permalink to this headline">¶</a></h4>
<p>We switched to Kotlin as our primary development language. The Gini Pay Bank SDK is still usable from Java, but we
recommend to upgrade to Kotlin to avoid the overhead incurred by the non-Java idiomatic style when using it with Java.</p>
</div>
<div class="section" id="gini-capture-sdk">
<h4>Gini Capture SDK<a class="headerlink" href="#gini-capture-sdk" title="Permalink to this headline">¶</a></h4>
<p>The <a class="reference external" href="https://developer.gini.net/gini-capture-sdk-android/html/#">Gini Capture SDK</a> supersedes the Gini Vision Library.</p>
<p>This migration guide will often refer to the Gini Capture SDK because it is used to fulfill the same functionality as
the Gini Vision Library did.</p>
</div>
<div class="section" id="gini-pay-api-library">
<h4>Gini Pay API Library<a class="headerlink" href="#gini-pay-api-library" title="Permalink to this headline">¶</a></h4>
<p>The <a class="reference external" href="https://github.com/gini/gini-pay-api-lib-android">Gini Pay API Library</a> supersedes the Gini API SDK and is used
to communicate with the <a class="reference external" href="https://pay-api.gini.net/documentation/#gini-pay-api-documentation-v1-0">Gini Pay API</a>.</p>
<p>You will only need to directly interact with the Gini Pay API Library if you implement a custom networking layer. If you
use the default networking implementation you don’t need to interact with it.</p>
</div>
<div class="section" id="configuration">
<h4>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h4>
<p>The entry point is the <code class="docutils literal notranslate"><span class="pre">GiniPayBank</span></code> singleton and to configure the capture feature you need to pass a
<code class="docutils literal notranslate"><span class="pre">CaptureConfiguration</span></code> object to its <code class="docutils literal notranslate"><span class="pre">setCaptureConfiguration()</span></code> method.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">CaptureConfiguration</span></code> contains the same options as the Gini Vision Library’s <code class="docutils literal notranslate"><span class="pre">GiniVision.Builder</span></code>.</p>
<p>The configuration is immutable and needs to be released before setting a new configuration.</p>
<p>This is how it was used in the Gini Vision Library:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">GiniVision</span><span class="p">.</span><span class="na">cleanup</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>

<span class="n">GiniVision</span><span class="p">.</span><span class="na">newInstance</span><span class="p">()</span>
    <span class="p">.(...)</span>
    <span class="p">.</span><span class="na">build</span><span class="p">()</span>
</pre></div>
</div>
<p>This is how you need to use it with the Gini Pay Bank SDK:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">GiniPayBank</span><span class="p">.</span><span class="na">releaseCapture</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>

<span class="n">val</span> <span class="n">captureConfiguration</span> <span class="o">=</span> <span class="n">CaptureConfiguration</span><span class="p">(</span>
    <span class="p">...</span>
<span class="p">)</span>

<span class="n">GiniPayBank</span><span class="p">.</span><span class="na">setCaptureConfiguration</span><span class="p">(</span><span class="n">captureConfiguration</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="requirements">
<h4>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h4>
<p>To check the requirements you need to call <code class="docutils literal notranslate"><span class="pre">GiniPayBank.checkCaptureRequirements()</span></code>. It will return a
<code class="docutils literal notranslate"><span class="pre">RequirementsReport</span></code> which has the same signature as the one in the Gini Vision Library.</p>
<p>This is how it was used in the Gini Vision Library:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">val</span> <span class="n">report</span> <span class="o">=</span> <span class="n">GiniVisionRequirements</span><span class="p">.</span><span class="na">checkRequirements</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>

<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">report</span><span class="p">.</span><span class="na">isFulfilled</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">report</span><span class="p">.</span><span class="na">requirementReports</span><span class="p">.</span><span class="na">forEach</span> <span class="p">{</span> <span class="n">report</span> <span class="o">-&gt;</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">report</span><span class="p">.</span><span class="na">isFulfilled</span><span class="p">)</span> <span class="p">{</span>
            <span class="p">(...)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This is how you need to use it with the Gini Pay Bank SDK:</p>
<blockquote>
<div><div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">val</span> <span class="n">report</span> <span class="o">=</span> <span class="n">GiniPayBank</span><span class="p">.</span><span class="na">checkCaptureRequirements</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>

<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">report</span><span class="p">.</span><span class="na">isFulfilled</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">report</span><span class="p">.</span><span class="na">requirementReports</span><span class="p">.</span><span class="na">forEach</span> <span class="p">{</span> <span class="n">report</span> <span class="o">-&gt;</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">report</span><span class="p">.</span><span class="na">isFulfilled</span><span class="p">)</span> <span class="p">{</span>
            <span class="p">(...)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="screen-api">
<h4>Screen API<a class="headerlink" href="#screen-api" title="Permalink to this headline">¶</a></h4>
<p>Launching the Screen API is done using the Android Result API. We provide the <code class="docutils literal notranslate"><span class="pre">CaptureFlowContract()</span></code> and you only need
to set an <code class="docutils literal notranslate"><span class="pre">ActivityResultCallback&lt;CaptureResult&gt;</span></code> to handle the result.</p>
<p>This is how it was used in the Gini Vision Library:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="n">val</span> <span class="n">REQUEST_SCAN</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">fun</span> <span class="nf">launchCapture</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">startActivityForResult</span><span class="p">(</span><span class="n">Intent</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">CameraActivity</span><span class="p">::</span><span class="n">class</span><span class="p">.</span><span class="na">java</span><span class="p">),</span> <span class="n">REQUEST_SCAN</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">override</span> <span class="n">fun</span> <span class="nf">onActivityResult</span><span class="p">(</span><span class="n">requestCode</span><span class="p">:</span> <span class="n">Int</span><span class="p">,</span> <span class="n">resultCode</span><span class="p">:</span> <span class="n">Int</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Intent</span><span class="o">?</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">super</span><span class="p">.</span><span class="na">onActivityResult</span><span class="p">(</span><span class="n">requestCode</span><span class="p">,</span> <span class="n">resultCode</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">requestCode</span> <span class="o">==</span> <span class="n">REQUEST_SCAN</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">when</span> <span class="p">(</span><span class="n">resultCode</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">Activity</span><span class="p">.</span><span class="na">RESULT_CANCELED</span> <span class="o">-&gt;</span> <span class="p">{</span>
                <span class="p">(...)</span>
            <span class="p">}</span>
            <span class="n">Activity</span><span class="p">.</span><span class="na">RESULT_OK</span> <span class="o">-&gt;</span> <span class="p">{</span>
                <span class="p">(...)</span>
            <span class="p">}</span>
            <span class="n">CameraActivity</span><span class="p">.</span><span class="na">RESULT_ERROR</span> <span class="o">-&gt;</span> <span class="p">{</span>
                <span class="p">(...)</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This is how you need to use it with the Gini Pay Bank SDK:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">val</span> <span class="n">captureLauncher</span> <span class="o">=</span> <span class="n">registerForActivityResult</span><span class="p">(</span><span class="n">CaptureFlowContract</span><span class="p">(),</span> <span class="p">::</span><span class="n">onCaptureResult</span><span class="p">)</span>

<span class="n">fun</span> <span class="nf">launchCapture</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">GiniPayBank</span><span class="p">.</span><span class="na">startCaptureFlow</span><span class="p">(</span><span class="n">captureLauncher</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">fun</span> <span class="nf">onCaptureResult</span><span class="p">(</span><span class="n">result</span><span class="p">:</span> <span class="n">CaptureResult</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">when</span> <span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">is</span> <span class="n">CaptureResult</span><span class="p">.</span><span class="na">Success</span> <span class="o">-&gt;</span> <span class="p">{</span>
            <span class="p">(...)</span>
        <span class="p">}</span>
        <span class="n">is</span> <span class="n">CaptureResult</span><span class="p">.</span><span class="na">Error</span> <span class="o">-&gt;</span> <span class="p">{</span>
            <span class="p">(...)</span>
        <span class="p">}</span>
        <span class="n">CaptureResult</span><span class="p">.</span><span class="na">Empty</span> <span class="o">-&gt;</span> <span class="p">{</span>
            <span class="p">(...)</span>
        <span class="p">}</span>
        <span class="n">CaptureResult</span><span class="p">.</span><span class="na">Cancel</span> <span class="o">-&gt;</span> <span class="p">{</span>
            <span class="p">(...)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="component-api">
<h4>Component API<a class="headerlink" href="#component-api" title="Permalink to this headline">¶</a></h4>
<p>For the Component API you will interact with the Gini Capture SDK directly.</p>
<p>The most important changes compared to the Gini Vision Library are:</p>
<ul class="simple">
<li>deprecated code was removed,</li>
<li>support for native activities and fragments was dropped,</li>
<li>package was renamed from <code class="docutils literal notranslate"><span class="pre">net.gini.android.vision.*</span></code> to <code class="docutils literal notranslate"><span class="pre">net.gini.android.capture.*</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">GiniVision</span></code> in class or interface names was renamed to <code class="docutils literal notranslate"><span class="pre">GiniCapture</span></code>.</li>
</ul>
<p>If you are already using Jetpack, then migrating the Component API should be fairly straight forward. In case you are
using native activities and fragments, then please first switch to using the Jetpack <code class="docutils literal notranslate"><span class="pre">AppCompatActivity</span></code>.</p>
<p>Apply the following steps to migrate:</p>
<ul class="simple">
<li>rename imported packages: replace <code class="docutils literal notranslate"><span class="pre">net.gini.android.vision</span></code> with <code class="docutils literal notranslate"><span class="pre">net.gini.android.capture</span></code>,</li>
<li>remove deprecated fragment listener methods,</li>
<li>rename class names: replace <code class="docutils literal notranslate"><span class="pre">GiniVision</span></code> with <code class="docutils literal notranslate"><span class="pre">GiniCapture</span></code>.</li>
</ul>
</div>
<div class="section" id="open-with">
<h4>Open With<a class="headerlink" href="#open-with" title="Permalink to this headline">¶</a></h4>
<p>When receiving a file through an intent from another app the intent has to be passed to helper methods in the
<code class="docutils literal notranslate"><span class="pre">GiniPayBank</span></code> singleton.</p>
<div class="section" id="id3">
<h5>Screen API<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h5>
<p>When using the Screen API we provide a helper method which uses the Activity Result API.</p>
<p>This is how it was used in the Gini Vision Library:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="n">val</span> <span class="n">REQUEST_SCAN</span> <span class="o">=</span> <span class="mi">1</span>

<span class="kd">private</span> <span class="kd">var</span> <span class="n">fileImportCancellationToken</span><span class="p">:</span> <span class="n">CancellationToken</span><span class="o">?</span> <span class="o">=</span> <span class="kc">null</span>

<span class="n">fun</span> <span class="nf">launchGiniVisionForIntent</span><span class="p">(</span><span class="n">intent</span><span class="p">:</span> <span class="n">Intent</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">fileImportCancellationToken</span> <span class="o">=</span> <span class="n">GiniVision</span><span class="p">.</span><span class="na">getInstance</span><span class="p">().</span><span class="na">createIntentForImportedFiles</span><span class="p">(</span><span class="n">intent</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span>
        <span class="n">object</span> <span class="p">:</span> <span class="n">AsyncCallback</span><span class="o">&lt;</span><span class="n">Intent</span><span class="p">,</span> <span class="n">ImportedFileValidationException</span><span class="o">&gt;</span> <span class="p">{</span>
            <span class="n">override</span> <span class="n">fun</span> <span class="nf">onSuccess</span><span class="p">(</span><span class="n">result</span><span class="p">:</span> <span class="n">Intent</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">fileImportCancellationToken</span> <span class="o">=</span> <span class="kc">null</span>
                <span class="nf">startActivityForResult</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">REQUEST_SCAN</span><span class="p">)</span>
            <span class="p">}</span>

            <span class="n">override</span> <span class="n">fun</span> <span class="nf">onError</span><span class="p">(</span><span class="n">exception</span><span class="p">:</span> <span class="n">ImportedFileValidationException</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">fileImportCancellationToken</span> <span class="o">=</span> <span class="kc">null</span>
                <span class="nf">handleFileImportError</span><span class="p">(</span><span class="n">exception</span><span class="p">)</span>
            <span class="p">}</span>

            <span class="n">override</span> <span class="n">fun</span> <span class="nf">onCancelled</span><span class="p">()</span> <span class="p">{</span>
                <span class="n">fileImportCancellationToken</span> <span class="o">=</span> <span class="kc">null</span>
            <span class="p">}</span>
        <span class="p">})</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This is how you need to use it with the Gini Pay Bank SDK:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">private</span> <span class="n">captureImportLauncher</span> <span class="o">=</span> <span class="n">registerForActivityResult</span><span class="p">(</span><span class="n">CaptureFlowImportContract</span><span class="p">(),</span> <span class="p">::</span><span class="n">onCaptureResult</span><span class="p">)</span>

<span class="kd">private</span> <span class="kd">var</span> <span class="n">fileImportCancellationToken</span><span class="p">:</span> <span class="n">CancellationToken</span><span class="o">?</span> <span class="o">=</span> <span class="kc">null</span>

<span class="n">fun</span> <span class="nf">launchCaptureForIntent</span><span class="p">(</span><span class="n">intent</span><span class="p">:</span> <span class="n">Intent</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">fileImportCancellationToken</span> <span class="o">=</span> <span class="n">GiniPayBank</span><span class="p">.</span><span class="na">startCaptureFlowForIntent</span><span class="p">(</span><span class="n">captureImportLauncher</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="n">intent</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id4">
<h5>Component API<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h5>
<p>When using the Component API we provide a helper method to create a Gini Capture SDK <code class="docutils literal notranslate"><span class="pre">Document</span></code> which can be passed to
the review or analysis fragment.</p>
<p>This is how it was used in the Gini Vision Library:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">private</span> <span class="kd">var</span> <span class="n">fileImportCancellationToken</span><span class="p">:</span> <span class="n">CancellationToken</span><span class="o">?</span> <span class="o">=</span> <span class="kc">null</span>

<span class="n">fun</span> <span class="nf">launchGiniVisionForIntent</span><span class="p">(</span><span class="n">intent</span><span class="p">:</span> <span class="n">Intent</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">fileImportCancellationToken</span> <span class="o">=</span> <span class="n">GiniVision</span><span class="p">.</span><span class="na">getInstance</span><span class="p">().</span><span class="na">createDocumentForImportedFiles</span><span class="p">(</span><span class="n">intent</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span>
        <span class="n">object</span> <span class="p">:</span> <span class="n">AsyncCallback</span><span class="o">&lt;</span><span class="n">Document</span><span class="p">,</span> <span class="n">ImportedFileValidationException</span><span class="o">&gt;</span> <span class="p">{</span>
            <span class="n">override</span> <span class="n">fun</span> <span class="nf">onSuccess</span><span class="p">(</span><span class="n">result</span><span class="p">:</span> <span class="n">Document</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">fileImportCancellationToken</span> <span class="o">=</span> <span class="kc">null</span>
                <span class="nf">if</span> <span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">isReviewable</span><span class="p">())</span> <span class="p">{</span>
                    <span class="n">launchMultiPageReviewScreen</span><span class="p">();</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="n">launchAnalysisScreen</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="n">override</span> <span class="n">fun</span> <span class="nf">onError</span><span class="p">(</span><span class="n">exception</span><span class="p">:</span> <span class="n">ImportedFileValidationException</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">fileImportCancellationToken</span> <span class="o">=</span> <span class="kc">null</span>
                <span class="nf">handleFileImportError</span><span class="p">(</span><span class="n">exception</span><span class="p">)</span>
            <span class="p">}</span>

            <span class="n">override</span> <span class="n">fun</span> <span class="nf">onCancelled</span><span class="p">()</span> <span class="p">{</span>
                <span class="n">fileImportCancellationToken</span> <span class="o">=</span> <span class="kc">null</span>
            <span class="p">}</span>
        <span class="p">})</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This is how you need to use it with the Gini Pay Bank SDK:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">private</span> <span class="kd">var</span> <span class="n">fileImportCancellationToken</span><span class="p">:</span> <span class="n">CancellationToken</span><span class="o">?</span> <span class="o">=</span> <span class="kc">null</span>

<span class="n">fun</span> <span class="nf">launchGiniVisionForIntent</span><span class="p">(</span><span class="n">intent</span><span class="p">:</span> <span class="n">Intent</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">fileImportCancellationToken</span> <span class="o">=</span> <span class="n">GiniPayBank</span><span class="p">.</span><span class="na">createDocumentForImportedFiles</span><span class="p">(</span><span class="n">intent</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span>
        <span class="n">object</span> <span class="p">:</span> <span class="n">AsyncCallback</span><span class="o">&lt;</span><span class="n">Document</span><span class="p">,</span> <span class="n">ImportedFileValidationException</span><span class="o">&gt;</span> <span class="p">{</span>
            <span class="n">override</span> <span class="n">fun</span> <span class="nf">onSuccess</span><span class="p">(</span><span class="n">result</span><span class="p">:</span> <span class="n">Document</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">fileImportCancellationToken</span> <span class="o">=</span> <span class="kc">null</span>
                <span class="nf">if</span> <span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">isReviewable</span><span class="p">())</span> <span class="p">{</span>
                    <span class="n">launchMultiPageReviewScreen</span><span class="p">();</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="n">launchAnalysisScreen</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="n">override</span> <span class="n">fun</span> <span class="nf">onError</span><span class="p">(</span><span class="n">exception</span><span class="p">:</span> <span class="n">ImportedFileValidationException</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">fileImportCancellationToken</span> <span class="o">=</span> <span class="kc">null</span>
                <span class="nf">handleFileImportError</span><span class="p">(</span><span class="n">exception</span><span class="p">)</span>
            <span class="p">}</span>

            <span class="n">override</span> <span class="n">fun</span> <span class="nf">onCancelled</span><span class="p">()</span> <span class="p">{</span>
                <span class="n">fileImportCancellationToken</span> <span class="o">=</span> <span class="kc">null</span>
            <span class="p">}</span>
        <span class="p">})</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="networking">
<h4>Networking<a class="headerlink" href="#networking" title="Permalink to this headline">¶</a></h4>
<p>The networking abstraction layer works the same way as in the Gini Vision Library. The only changes are in the class and
interface names where <code class="docutils literal notranslate"><span class="pre">GiniVision</span></code> was replaced with <code class="docutils literal notranslate"><span class="pre">GiniCapture</span></code>.</p>
<div class="section" id="default">
<h5>Default<a class="headerlink" href="#default" title="Permalink to this headline">¶</a></h5>
<p>Migrating the default networking implementation is straight forward:</p>
<ul class="simple">
<li>rename imported packages: replace <code class="docutils literal notranslate"><span class="pre">net.gini.android.vision</span></code> with <code class="docutils literal notranslate"><span class="pre">net.gini.android.capture</span></code>,</li>
<li>rename class names: replace <code class="docutils literal notranslate"><span class="pre">GiniVision</span></code> with <code class="docutils literal notranslate"><span class="pre">GiniCapture</span></code>,</li>
<li>use the Gini Pay Bank SDK capture configuration</li>
</ul>
<p>This is how it was used in the Gini Vision Library:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">val</span> <span class="n">networkService</span> <span class="o">=</span> <span class="n">GiniVisionDefaultNetworkService</span><span class="p">.</span><span class="na">builder</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
        <span class="p">.(...)</span>
        <span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="n">val</span> <span class="n">networkApi</span> <span class="o">=</span> <span class="n">GiniVisionDefaultNetworkApi</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
        <span class="p">.</span><span class="na">withGiniVisionDefaultNetworkService</span><span class="p">(</span><span class="n">networkService</span><span class="p">)</span>
        <span class="p">.</span><span class="na">build</span><span class="p">();</span>

<span class="n">GiniVision</span><span class="p">.</span><span class="na">cleanup</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>

<span class="n">GiniVision</span><span class="p">.</span><span class="na">newInstance</span><span class="p">()</span>
    <span class="p">.</span><span class="na">setGiniVisionNetworkService</span><span class="p">(</span><span class="n">networkService</span><span class="p">)</span>
    <span class="p">.</span><span class="na">setGiniVisionNetworkApi</span><span class="p">(</span><span class="n">networkApi</span><span class="p">)</span>
    <span class="p">.(...)</span>
    <span class="p">.</span><span class="na">build</span><span class="p">()</span>
</pre></div>
</div>
<p>This is how you need to use it with the Gini Pay Bank SDK:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">val</span> <span class="n">networkService</span> <span class="o">=</span> <span class="n">GiniCaptureDefaultNetworkService</span><span class="p">.</span><span class="na">builder</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
        <span class="p">.(...)</span>
        <span class="p">.</span><span class="na">build</span><span class="p">();</span>
<span class="n">val</span> <span class="n">networkApi</span> <span class="o">=</span> <span class="n">GiniCaptureDefaultNetworkApi</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
        <span class="p">.</span><span class="na">withGiniVisionDefaultNetworkService</span><span class="p">(</span><span class="n">networkService</span><span class="p">)</span>
        <span class="p">.</span><span class="na">build</span><span class="p">();</span>

<span class="n">GiniPayBank</span><span class="p">.</span><span class="na">releaseCapture</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>

<span class="n">GiniPayBank</span><span class="p">.</span><span class="na">setCaptureConfiguration</span><span class="p">(</span>
    <span class="n">CaptureConfiguration</span><span class="p">(</span>
        <span class="n">networkService</span> <span class="o">=</span> <span class="n">networkService</span><span class="p">,</span>
        <span class="n">networkApi</span> <span class="o">=</span> <span class="n">networkApi</span><span class="p">,</span>
        <span class="p">...</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="custom">
<h5>Custom<a class="headerlink" href="#custom" title="Permalink to this headline">¶</a></h5>
<p>Migrating a custom networking layer implementation is also straight forward:</p>
<ul class="simple">
<li>rename imported packages: replace <code class="docutils literal notranslate"><span class="pre">net.gini.android.vision</span></code> with <code class="docutils literal notranslate"><span class="pre">net.gini.android.capture</span></code>,</li>
<li>rename interface names: replace <code class="docutils literal notranslate"><span class="pre">GiniVision</span></code> with <code class="docutils literal notranslate"><span class="pre">GiniCapture</span></code>,</li>
<li>we recommend moving from the Gini API SDK to the newer Gini Pay API Library which offers kotlin coroutine support.</li>
</ul>
</div>
</div>
<div class="section" id="event-tracking">
<h4>Event Tracking<a class="headerlink" href="#event-tracking" title="Permalink to this headline">¶</a></h4>
<p>Event tracking works the same way as in the GiniVisionLibrary. You only need to update the package name and set your
<code class="docutils literal notranslate"><span class="pre">EventTracker</span></code> implementation when configuring the Gini Pay Bank SDK.</p>
<p>This is how it was used in the Gini Vision Library:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">val</span> <span class="n">eventTracker</span><span class="p">:</span> <span class="n">EventTracker</span> <span class="o">=</span> <span class="p">(...)</span>

<span class="n">GiniVision</span><span class="p">.</span><span class="na">cleanup</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>

<span class="n">GiniVision</span><span class="p">.</span><span class="na">newInstance</span><span class="p">()</span>
    <span class="p">.</span><span class="na">setEventTracker</span><span class="p">(</span><span class="n">eventTracker</span><span class="p">)</span>
    <span class="p">.(...)</span>
    <span class="p">.</span><span class="na">build</span><span class="p">()</span>
</pre></div>
</div>
<p>This is how you need to use it with the Gini Pay Bank SDK:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">val</span> <span class="n">eventTracker</span><span class="p">:</span> <span class="n">EventTracker</span> <span class="o">=</span> <span class="p">(...)</span>

<span class="n">GiniPayBank</span><span class="p">.</span><span class="na">releaseCapture</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>

<span class="n">GiniPayBank</span><span class="p">.</span><span class="na">setCaptureConfiguration</span><span class="p">(</span>
    <span class="n">CaptureConfiguration</span><span class="p">(</span>
        <span class="n">eventTracker</span> <span class="o">=</span> <span class="n">eventTracker</span><span class="p">,</span>
        <span class="p">...</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="customization">
<h4>Customization<a class="headerlink" href="#customization" title="Permalink to this headline">¶</a></h4>
<p>Customization is done the same way via overriding of app resources. You only need to rename the assets:</p>
<ul class="simple">
<li>rename <code class="docutils literal notranslate"><span class="pre">gv_</span></code> prefixes to <code class="docutils literal notranslate"><span class="pre">gc_</span></code>,</li>
<li>replace <code class="docutils literal notranslate"><span class="pre">GiniVision</span></code> in theme and style names with <code class="docutils literal notranslate"><span class="pre">GiniCapture</span></code>.</li>
</ul>
</div>
</div>
<span id="document-reference"></span><div class="section" id="reference-doc">
<h3>Reference Doc<a class="headerlink" href="#reference-doc" title="Permalink to this headline">¶</a></h3>
<p>You can view the reference documentation here:</p>
<ul class="simple">
<li><a class="reference external" href="http://developer.gini.net/gini-pay-bank-sdk-android/kdoc/index.html">Gini Pay Bank KDoc</a></li>
</ul>
</div>
<span id="document-license"></span><div class="section" id="license">
<h3>License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h3>
<p>The Gini Pay Bank SDK are licensed under a Private License and
also integrate several third party libraries.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Always make sure to ship all license notices and permissions with your application.</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Copyright</span> <span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="mi">2014</span><span class="o">-</span><span class="mi">2021</span><span class="p">,</span> <span class="n">Gini</span> <span class="n">GmbH</span>
<span class="n">All</span> <span class="n">rights</span> <span class="n">reserved</span><span class="o">.</span>

<span class="n">The</span> <span class="n">Gini</span> <span class="n">Pay</span> <span class="n">Bank</span> <span class="n">SDK</span> <span class="ow">is</span> <span class="n">licensed</span> <span class="n">through</span> <span class="n">Gini</span> <span class="n">GmbH</span> <span class="p">(</span><span class="s2">&quot;Gini&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">may</span> <span class="ow">not</span> <span class="n">be</span>
<span class="n">used</span><span class="p">,</span> <span class="n">altered</span> <span class="ow">or</span> <span class="n">copied</span> <span class="ow">in</span> <span class="nb">any</span> <span class="n">way</span> <span class="n">without</span> <span class="n">explicit</span> <span class="n">permission</span> <span class="n">by</span> <span class="n">Gini</span><span class="o">.</span> <span class="n">The</span>
<span class="n">terms</span> <span class="n">of</span> <span class="n">usage</span> <span class="n">are</span> <span class="n">defined</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">separate</span> <span class="n">usage</span> <span class="n">agreement</span> <span class="n">between</span> <span class="n">Gini</span> <span class="ow">and</span> <span class="n">the</span>
<span class="n">licensee</span><span class="p">,</span> <span class="n">where</span> <span class="n">the</span> <span class="n">licensee</span> <span class="n">can</span> <span class="n">gain</span> <span class="n">access</span> <span class="n">to</span> <span class="n">a</span> <span class="n">non</span><span class="o">-</span><span class="n">exclusive</span><span class="p">,</span>
<span class="n">non</span><span class="o">-</span><span class="n">transferable</span> <span class="n">usage</span> <span class="n">right</span> <span class="n">which</span> <span class="ow">is</span> <span class="n">restricted</span> <span class="k">for</span> <span class="n">the</span> <span class="n">time</span> <span class="n">of</span> <span class="n">a</span> <span class="n">contractual</span>
<span class="n">relationship</span> <span class="n">between</span> <span class="n">Gini</span> <span class="ow">and</span> <span class="n">the</span> <span class="n">licensee</span><span class="o">.</span>

<span class="n">For</span> <span class="n">license</span> <span class="n">related</span> <span class="n">inquiries</span> <span class="n">contact</span> <span class="n">Gini</span> <span class="n">via</span> <span class="n">the</span> <span class="n">email</span> <span class="n">address</span>
<span class="n">technical</span><span class="o">-</span><span class="n">support</span><span class="nd">@gini</span><span class="o">.</span><span class="n">net</span><span class="o">.</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>


          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
    </p>
  </div>
</footer>
        </div>
      </div>

    </section>

  </div>
  

  
</body>
</html>


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Pay &mdash; Gini Capture SDK for Android 2.0 documentation</title>
  

  
  

  
  <link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600,400italic,600italic|Source+Code+Pro|Roboto+Slab:400,700" rel="stylesheet" type="text/css" />

  
  

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:'./',
        VERSION:'2.0',
        COLLAPSE_INDEX:false,
        FILE_SUFFIX:'.html',
        HAS_SOURCE:  true
      };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/language_data.js"></script>

    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
    <script type="text/javascript">
        jQuery(function () {
            SphinxRtdTheme.StickyNav.enable();
        });
    </script>
  

  
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Gini Capture SDK for Android 2.0 documentation" href="index.html"/>
        <link rel="next" title="Customization" href="customization.html"/>
        <link rel="prev" title="Capture" href="capture.html"/> 

  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" id="gini-logo">gini API</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference external" href="http://developer.gini.net/gini-pay-bank-sdk-android/kdoc/index.html">Gini Pay Bank KDoc</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="getting-started.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started.html#gini-pay-api-client-credentials">Gini Pay API Client Credentials</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started.html#integration">Integration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="authentication.html">Authentication</a><ul>
<li class="toctree-l2"><a class="reference internal" href="authentication.html#capture-feature">Capture Feature</a></li>
<li class="toctree-l2"><a class="reference internal" href="authentication.html#pay-feature">Pay Feature</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="capture.html">Capture</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Pay</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#setup">Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#intent-filter">Intent filter</a></li>
<li class="toctree-l3"><a class="reference internal" href="#package-name">Package name</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#handle-payment-requests">Handle payment requests</a></li>
<li class="toctree-l2"><a class="reference internal" href="#testing">Testing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#end-to-end-testing">End to end testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#testing-in-production">Testing in production</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="customization.html">Customization</a></li>
<li class="toctree-l1"><a class="reference internal" href="migrating-from-gvl.html">Migrating from the Gini Vision Library</a><ul>
<li class="toctree-l2"><a class="reference internal" href="migrating-from-gvl.html#kotlin">Kotlin</a></li>
<li class="toctree-l2"><a class="reference internal" href="migrating-from-gvl.html#gini-capture-sdk">Gini Capture SDK</a></li>
<li class="toctree-l2"><a class="reference internal" href="migrating-from-gvl.html#gini-pay-api-library">Gini Pay API Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="migrating-from-gvl.html#configuration">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="migrating-from-gvl.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="migrating-from-gvl.html#screen-api">Screen API</a></li>
<li class="toctree-l2"><a class="reference internal" href="migrating-from-gvl.html#component-api">Component API</a></li>
<li class="toctree-l2"><a class="reference internal" href="migrating-from-gvl.html#open-with">Open With</a><ul>
<li class="toctree-l3"><a class="reference internal" href="migrating-from-gvl.html#id3">Screen API</a></li>
<li class="toctree-l3"><a class="reference internal" href="migrating-from-gvl.html#id4">Component API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="migrating-from-gvl.html#networking">Networking</a><ul>
<li class="toctree-l3"><a class="reference internal" href="migrating-from-gvl.html#default">Default</a></li>
<li class="toctree-l3"><a class="reference internal" href="migrating-from-gvl.html#custom">Custom</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="migrating-from-gvl.html#event-tracking">Event Tracking</a></li>
<li class="toctree-l2"><a class="reference internal" href="migrating-from-gvl.html#customization">Customization</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a><ul>
<li class="toctree-l2"><a class="reference internal" href="license.html#licenses-and-acknowledgements-for-incorporated-software">Licenses and Acknowledgements for Incorporated Software</a><ul>
<li class="toctree-l3"><a class="reference internal" href="license.html#apache-commons-sanselan">Apache Commons Sanselan</a></li>
<li class="toctree-l3"><a class="reference internal" href="license.html#touchimageview">TouchImageView</a></li>
<li class="toctree-l3"><a class="reference internal" href="license.html#gini-android-sdk">Gini Android SDK</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Gini Capture SDK for Android</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Pay</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="pay">
<h1>Pay<a class="headerlink" href="#pay" title="Permalink to this headline">¶</a></h1>
<p>Pay feature provides the API for receiving a payment request started
by a Business app, mark it as payed and return to the app that started
the flow.</p>
<div class="section" id="setup">
<h2>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h2>
<p>The pay feature needs to be initialized by calling <code class="docutils literal notranslate"><span class="pre">GiniPayBank.setGiniApi()</span></code>.
See the <a class="reference external" href="authentication.html">authentication</a> page for more details.</p>
<div class="section" id="intent-filter">
<h3>Intent filter<a class="headerlink" href="#intent-filter" title="Permalink to this headline">¶</a></h3>
<p>To use the pay feature you need to add to your manifest an intent filter for
the ginipay URI so that it is discoverable by the business apps:</p>
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="n">intent</span><span class="p">-</span><span class="n">filter</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="n">action</span> <span class="n">android</span><span class="p">:</span><span class="n">name</span><span class="p">=</span><span class="s">&quot;android.intent.action.VIEW&quot;</span> <span class="p">/&gt;</span>

    <span class="p">&lt;</span><span class="n">category</span> <span class="n">android</span><span class="p">:</span><span class="n">name</span><span class="p">=</span><span class="s">&quot;android.intent.category.DEFAULT&quot;</span> <span class="p">/&gt;</span>

    <span class="p">&lt;</span><span class="k">data</span>
        <span class="n">android</span><span class="p">:</span><span class="n">host</span><span class="p">=</span><span class="s">&quot;payment&quot;</span>
        <span class="n">android</span><span class="p">:</span><span class="n">scheme</span><span class="p">=</span><span class="s">&quot;ginipay&quot;</span> <span class="p">/&gt;</span>
<span class="p">&lt;/</span><span class="n">intent</span><span class="p">-</span><span class="n">filter</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>The intent filter can be added to the activity which will handle the payment flow of
that payment request.</p>
</div>
<div class="section" id="package-name">
<h3>Package name<a class="headerlink" href="#package-name" title="Permalink to this headline">¶</a></h3>
<p>You also need to tell us your app’s package name. It will be associated with the payment provider we
create for your banking app in the Gini Pay API. The Gini Pay Business SDK will only open your banking app if
it is installed and it has the same package name as the one known by the Gini Pay API.</p>
<p>If you have different package names for development and production
then please share both of them with us so that we can use the right one for each environment.</p>
</div>
</div>
<div class="section" id="handle-payment-requests">
<h2>Handle payment requests<a class="headerlink" href="#handle-payment-requests" title="Permalink to this headline">¶</a></h2>
<p>The flow is:</p>
<ol class="arabic simple">
<li><code class="docutils literal notranslate"><span class="pre">getRequestId</span></code> to extract the id from the <code class="docutils literal notranslate"><span class="pre">Intent</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">getPaymentRequest</span></code> to get payment details set by the business app.</li>
<li><code class="docutils literal notranslate"><span class="pre">resolvePaymentRequest</span></code> to mark the <code class="docutils literal notranslate"><span class="pre">PaymentRequest</span></code> as paid.</li>
<li><code class="docutils literal notranslate"><span class="pre">returnToBusiness</span></code> to return to the business app that started the flow.</li>
</ol>
<p>See the <code class="docutils literal notranslate"><span class="pre">appscreenapi</span></code> example app’s <code class="docutils literal notranslate"><span class="pre">pay</span></code> package for more details.</p>
</div>
<div class="section" id="testing">
<h2>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h2>
<p>Testing the payment feature requires an app which uses the Gini Pay Business SDK to create payment requests and to
forward them to your banking app to view and resolve those payment requests.</p>
<div class="section" id="requirements">
<h3>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h3>
<div class="section" id="example-business-app">
<h4>Example business app<a class="headerlink" href="#example-business-app" title="Permalink to this headline">¶</a></h4>
<p>An example business app is available in the <a class="reference external" href="https://github.com/gini/gini-pay-business-sdk-android">Gini Pay Business SDK’s</a>
repository.</p>
<p>You can use the same Gini Pay API client credentials in the example business app as in your app, if not otherwise
specified.</p>
<div class="section" id="development-gini-pay-api-client-credentials">
<h5>Development Gini Pay API client credentials<a class="headerlink" href="#development-gini-pay-api-client-credentials" title="Permalink to this headline">¶</a></h5>
<p>In order to test using our example business app you need to use development client credentials. This will make sure
the Gini Pay Business SDK will use a payment provider which will open your development banking app.</p>
</div>
</div>
</div>
<div class="section" id="end-to-end-testing">
<h3>End to end testing<a class="headerlink" href="#end-to-end-testing" title="Permalink to this headline">¶</a></h3>
<p>After you’ve set the client credentials in the example business app you can install it along with your banking app on
your device.</p>
<p>Run the example business app and import an invoice or take a picture of one to start the payment flow.</p>
<p>After following the integration steps above your banking app will be launched and you’ll be able to fetch the payment
request, show the payment information and resolve the payment after the transaction has been confirmed. At this point,
you may redirect back to the business app.</p>
<p>With these steps completed you have verified that your app, the Gini Pay API, the Gini Pay Business SDK and the Gini Pay
Bank SDK work together correctly.</p>
</div>
<div class="section" id="testing-in-production">
<h3>Testing in production<a class="headerlink" href="#testing-in-production" title="Permalink to this headline">¶</a></h3>
<p>The steps are the same but instead of the development client credentials you will need to use production client
credentials. This will make sure the Gini Pay Business SDK receives real payment providers including the one which
opens your production banking app.</p>
<p>For testing the flow using the example business app please make sure that the production client credentials are used
before installing it.</p>
<p>You can also test with a real business app. Please contact us in case you don’t know which business app(s) to install
for starting the payment flow.</p>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="customization.html" class="btn btn-neutral float-right" title="Customization">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="capture.html" class="btn btn-neutral" title="Capture"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
    </p>
  </div>
</footer>
        </div>
      </div>

    </section>

  </div>
  

  
</body>
</html>